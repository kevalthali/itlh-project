"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,n){for(var o=0;o<n.length;o++){var t=n[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(n,o,t){return o&&e(n.prototype,o),t&&e(n,t),n}}();define(["jquery"],function(e){return function(){function n(){_classCallCheck(this,n),this.header=e(".page-header"),this.nav=e(this.header).find(".navigation"),this.navLinks=e(this.nav).find("li.level0.has-children"),this.megaMenu=e(this.nav).find(".mega-menu"),this.activeDropdown=null,this.build()}return _createClass(n,[{key:"build",value:function(){var n=this,o="touchend",t="mouseenter",i="mouseleave";e(this.navLinks).on(o,function(e){return function(){n.checkWidth(n.toggleDropdown)}}).on(t,function(e){n.checkWidth(function(){e.stopPropagation(),n.stopCloseTimeout(),n.openDropdown(e)})}).on(i,function(){n.checkWidth(n.startCloseTimeout)}),e(this.megaMenu).on(o,function(e){return e.stopPropagation()}).on(t,function(){n.checkWidth(n.stopCloseTimeout)}).on(i,function(){n.checkWidth(n.startCloseTimeout)}),e(document).on(o,function(){n.checkWidth(n.closeDropdown)})}},{key:"toggleDropdown",value:function(e){this.activeDropdown===e?this.closeDropdown():this.openDropdown(e)}},{key:"openDropdown",value:function(n){this.stopCloseTimeout();var o=n.currentTarget;this.activeDropdown!==o&&(this.activeDropdown=o,e(this.navLinks).removeClass("active"),e(this.megaMenu).removeClass("active"),e(o).addClass("active"),e(o).find(".mega-menu").addClass("active"))}},{key:"closeDropdown",value:function(){e(this.navLinks).removeClass("active"),e(this.megaMenu).removeClass("active"),this.activeDropdown=null}},{key:"startCloseTimeout",value:function(){var e=this;this.closeDropdownTimeout=setTimeout(function(){e.closeDropdown()},50)}},{key:"stopCloseTimeout",value:function(){clearTimeout(this.closeDropdownTimeout)}},{key:"checkWidth",value:function(n){e(window).width()<1024||n.bind(this)()}},{key:"hasTouch",value:function(){var e=!1;return window.PointerEvent&&"maxTouchPoints"in navigator?navigator.maxTouchPoints>0&&(e=!0):window.matchMedia&&window.matchMedia("(any-pointer:coarse)").matches?e=!0:(window.TouchEvent||"ontouchstart"in window)&&(e=!0),e}}]),n}()});